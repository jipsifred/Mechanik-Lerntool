@import "tailwindcss";

/* ─── Design Tokens ─── */
:root {
  /* Surface Colors */
  --surface-bg: #f8f8fa;
  --user-bubble-bg: #ededed;

  /* Glass Colors */
  --glass-bg: rgba(236, 236, 240, 0.85);
  --glass-soft-bg: rgba(255, 255, 255, 0.65);
  --glass-inner-bg: rgba(255, 255, 255, 0.4);
  --glass-border-white: rgba(255, 255, 255, 0.8);
  --glass-border-inner: rgba(255, 255, 255, 0.6);

  /* Glass Gradient Border Stops */
  --glass-border-dark: #b4b4c0;
  --glass-border-light: #ffffff;
  --glass-border-mid: #b4b4c0;

  /* Neo-Green Button */
  --neo-green-base: #98f5b3;
  --neo-green-dark: #529669;
  --neo-green-bright: #e8fff0;
  --neo-green-glow: rgba(139, 233, 168, 0.4);
  --neo-green-text: #2d7a4a;
  --neo-green-idle-text: #64748b;

  /* Neo-Gray Button */
  --neo-gray-base: #e2e2e8;
  --neo-gray-dark: #9898a8;
  --neo-gray-bright: #f4f4f8;
  --neo-gray-glow: rgba(160, 160, 180, 0.3);
  --neo-gray-text: #5a5a6e;

  /* Glassy Button */
  --glassy-btn-bg-top: #ffffff;
  --glassy-btn-bg-bottom: #f0f0f5;
  --glassy-btn-border: #e5e5ea;
  --glassy-btn-active-bg: #e9e9ee;

  /* Shadows */
  --shadow-glass: 12px 20px 40px -8px rgba(0, 0, 0, 0.08);
  --shadow-glass-soft: 0 8px 32px -8px rgba(0, 0, 0, 0.06),
                        inset 0 1px 2px rgba(255, 255, 255, 0.8);
  --shadow-glass-inner: inset 0 2px 4px rgba(0, 0, 0, 0.02);
  --shadow-neo-green: inset 0 10px 12px -4px rgba(0, 0, 0, 0.16),
                      0 8px 16px -4px var(--neo-green-glow);
  --shadow-neo-green-active: inset 0 12px 16px -4px rgba(0, 0, 0, 0.25),
                             0 4px 8px -4px var(--neo-green-glow);
  --shadow-neo-gray: inset 0 6px 8px -4px rgba(0, 0, 0, 0.05),
                     0 8px 16px -4px var(--neo-gray-glow);
  --shadow-neo-gray-active: inset 0 12px 16px -4px rgba(0, 0, 0, 0.25),
                            0 4px 8px -4px var(--neo-gray-glow);

  /* Blur */
  --blur-glass: 12px;
  --blur-glass-soft: 24px;

  /* Radii */
  --radius-panel: 12px;

  /* Typography */
  --text-hint: 11px;
  --text-label: 12px;
  --text-body: 13px;
  --text-heading: 15px;
  --text-title: 18px;
}

/* ─── Conic Gradient (shared) ─── */
@layer utilities {
  .glass-panel {
    --g-angle: 135deg;
    --g-stop1: 25%;
    --g-stop2: 42%;
    --g-stop3: 58%;
    --g-stop4: 75%;
    background: var(--glass-bg);
    backdrop-filter: blur(var(--blur-glass));
    -webkit-backdrop-filter: blur(var(--blur-glass));
    border: 1px solid transparent;
    box-shadow: var(--shadow-glass);
    position: relative;
  }

  .glass-panel::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(var(--g-angle), var(--glass-border-dark) 0%, var(--glass-border-dark) var(--g-stop1), var(--glass-border-light) var(--g-stop2), var(--glass-border-light) var(--g-stop3), var(--glass-border-mid) var(--g-stop4), var(--glass-border-mid) 100%);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  .dashboard-pill-shell {
    border: 1px solid transparent;
    background:
      linear-gradient(#ececf0, #ececf0) padding-box,
      linear-gradient(
        var(--g-angle),
        var(--glass-border-dark) 0%,
        var(--glass-border-dark) var(--g-stop1, 25%),
        var(--glass-border-light) var(--g-stop2, 42%),
        var(--glass-border-light) var(--g-stop3, 58%),
        var(--glass-border-mid) var(--g-stop4, 75%),
        var(--glass-border-mid) 100%
      ) border-box;
    box-shadow: var(--shadow-glass);
  }

  .glass-panel-soft {
    background: var(--glass-soft-bg);
    backdrop-filter: blur(var(--blur-glass-soft));
    -webkit-backdrop-filter: blur(var(--blur-glass-soft));
    border: 1px solid var(--glass-border-white);
    box-shadow: var(--shadow-glass-soft);
  }

  .glass-panel-inner {
    background: var(--glass-inner-bg);
    border: 1px solid var(--glass-border-inner);
    box-shadow: var(--shadow-glass-inner);
  }

  .glassy-button {
    background: linear-gradient(180deg, var(--glassy-btn-bg-top) 0%, var(--glassy-btn-bg-bottom) 100%);
    border: 1px solid var(--glassy-btn-border);
    box-shadow:
      inset 0 2px 2px rgba(255, 255, 255, 1),
      inset 0 -1px 2px rgba(0, 0, 0, 0.04),
      0 4px 8px -2px rgba(0, 0, 0, 0.08),
      0 2px 4px -2px rgba(0, 0, 0, 0.04);
  }

  .glassy-button:active {
    background: var(--glassy-btn-active-bg);
    box-shadow:
      inset 0 2px 4px rgba(0, 0, 0, 0.08),
      0 1px 1px rgba(255, 255, 255, 1);
  }

  .neo-btn-green {
    background: linear-gradient(var(--neo-green-base), var(--neo-green-base)) padding-box,
                conic-gradient(from 0deg, var(--neo-green-base) 0deg, var(--neo-green-base) 25deg, var(--neo-green-dark) 70deg, var(--neo-green-dark) 80deg, var(--neo-green-bright) 130deg, var(--neo-green-bright) 230deg, var(--neo-green-dark) 280deg, var(--neo-green-dark) 290deg, var(--neo-green-base) 335deg, var(--neo-green-base) 360deg) border-box;
    border: 1px solid transparent;
    box-shadow: var(--shadow-neo-green);
    color: var(--neo-green-text);
  }

  .neo-btn-green:active {
    box-shadow: var(--shadow-neo-green-active);
  }

  .hover-neo-btn-green {
    border: 1px solid transparent;
    color: var(--neo-green-idle-text);
    background-color: transparent;
  }

  .hover-neo-btn-green:hover {
    background: linear-gradient(var(--neo-green-base), var(--neo-green-base)) padding-box,
                conic-gradient(from 0deg, var(--neo-green-base) 0deg, var(--neo-green-base) 25deg, var(--neo-green-dark) 70deg, var(--neo-green-dark) 80deg, var(--neo-green-bright) 130deg, var(--neo-green-bright) 230deg, var(--neo-green-dark) 280deg, var(--neo-green-dark) 290deg, var(--neo-green-base) 335deg, var(--neo-green-base) 360deg) border-box;
    box-shadow: var(--shadow-neo-green);
    color: var(--neo-green-text);
  }

  .hover-neo-btn-green:active {
    box-shadow: var(--shadow-neo-green-active);
  }

  .neo-btn-gray {
    background: linear-gradient(var(--neo-gray-base), var(--neo-gray-base)) padding-box,
                conic-gradient(from 0deg, var(--neo-gray-base) 0deg, var(--neo-gray-base) 25deg, var(--neo-gray-dark) 70deg, var(--neo-gray-dark) 80deg, var(--neo-gray-bright) 130deg, var(--neo-gray-bright) 230deg, var(--neo-gray-dark) 280deg, var(--neo-gray-dark) 290deg, var(--neo-gray-base) 335deg, var(--neo-gray-base) 360deg) border-box;
    border: 1px solid transparent;
    box-shadow: var(--shadow-neo-gray);
    color: var(--neo-gray-text);
  }

  .neo-btn-gray:hover {
    background: linear-gradient(var(--neo-green-base), var(--neo-green-base)) padding-box,
                conic-gradient(from 0deg, var(--neo-green-base) 0deg, var(--neo-green-base) 25deg, var(--neo-green-dark) 70deg, var(--neo-green-dark) 80deg, var(--neo-green-bright) 130deg, var(--neo-green-bright) 230deg, var(--neo-green-dark) 280deg, var(--neo-green-dark) 290deg, var(--neo-green-base) 335deg, var(--neo-green-base) 360deg) border-box;
    box-shadow: var(--shadow-neo-green);
    color: var(--neo-green-text);
  }

  .neo-btn-gray:active {
    box-shadow: var(--shadow-neo-green-active);
  }

  .panel-radius { border-radius: var(--radius-panel); }

  .text-hint    { font-size: var(--text-hint); }
  .text-label   { font-size: var(--text-label); }
  .text-body    { font-size: var(--text-body); }
  .text-heading { font-size: var(--text-heading); }
  .text-title   { font-size: var(--text-title); }

  .active-tab {
    background: var(--glass-soft-bg);
    backdrop-filter: blur(var(--blur-glass-soft));
    -webkit-backdrop-filter: blur(var(--blur-glass-soft));
    border: 1px solid var(--glass-border-white);
    border-bottom: 0;
  }
}

/* ─── Markdown Body (AI Message Rendering) ─── */
.markdown-body {
  font-size: var(--text-body);
  line-height: 1.7;
  color: inherit;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.markdown-body > :first-child { margin-top: 0; }
.markdown-body > :last-child  { margin-bottom: 0; }

/* Headings */
.markdown-body h1 { font-size: 1.4em; font-weight: 600; line-height: 1.3; margin: 1.2em 0 0.6em; color: #1e293b; }
.markdown-body h2 { font-size: 1.2em; font-weight: 600; line-height: 1.3; margin: 1.1em 0 0.5em; color: #1e293b; }
.markdown-body h3 { font-size: 1.1em; font-weight: 600; line-height: 1.35; margin: 1em 0 0.4em; color: #334155; }
.markdown-body h4 { font-size: 1em;   font-weight: 600; line-height: 1.4;  margin: 0.8em 0 0.3em; color: #334155; }

/* Paragraphs */
.markdown-body p {
  margin: 0 0 0.75em;
  line-height: 1.7;
}

/* Bold / Italic */
.markdown-body strong { font-weight: 600; color: #1e293b; }
.markdown-body em     { font-style: italic; }

/* Links */
.markdown-body a { color: #2563eb; text-decoration: underline; text-underline-offset: 2px; }
.markdown-body a:hover { color: #1d4ed8; }

/* Lists */
.markdown-body ul { list-style-type: disc; padding-left: 1.5em; margin: 0.5em 0 0.75em; }
.markdown-body ol { list-style-type: decimal; padding-left: 1.5em; margin: 0.5em 0 0.75em; }
.markdown-body li { margin: 0.25em 0; line-height: 1.6; }
.markdown-body li > ul,
.markdown-body li > ol { margin: 0.2em 0; }
.markdown-body ul ul   { list-style-type: circle; }
.markdown-body ul ul ul { list-style-type: square; }

/* Code blocks */
.markdown-body pre {
  background: #1e293b;
  color: #e2e8f0;
  border-radius: 8px;
  padding: 0.9em 1em;
  margin: 0.75em 0;
  overflow-x: auto;
  font-size: 0.85em;
  line-height: 1.5;
  font-family: 'SF Mono', 'Fira Code', Menlo, Consolas, monospace;
}

.markdown-body pre code {
  background: none;
  padding: 0;
  border-radius: 0;
  font-size: inherit;
  color: inherit;
}

/* Inline code */
.markdown-body code {
  background: rgba(148, 163, 184, 0.15);
  color: #be185d;
  padding: 0.15em 0.35em;
  border-radius: 4px;
  font-size: 0.88em;
  font-family: 'SF Mono', 'Fira Code', Menlo, Consolas, monospace;
}

/* Blockquotes */
.markdown-body blockquote {
  border-left: 3px solid #94a3b8;
  padding: 0.3em 0 0.3em 1em;
  margin: 0.5em 0 0.75em;
  color: #64748b;
}

.markdown-body blockquote p { margin: 0.25em 0; }

/* Tables */
.markdown-body table { width: 100%; border-collapse: collapse; margin: 0.75em 0; font-size: 0.92em; }
.markdown-body th { background: rgba(148, 163, 184, 0.1); font-weight: 600; text-align: left; padding: 0.4em 0.75em; border: 1px solid #e2e8f0; }
.markdown-body td { padding: 0.4em 0.75em; border: 1px solid #e2e8f0; }
.markdown-body tr:nth-child(even) { background: rgba(248, 250, 252, 0.5); }

/* Horizontal rules */
.markdown-body hr { border: none; border-top: 1px solid #e2e8f0; margin: 1em 0; }

/* KaTeX in chat */
.markdown-body .katex-display { margin: 0.75em 0; overflow-x: auto; overflow-y: hidden; padding: 0.25em 0; }
.markdown-body .katex { font-size: 1em; }
